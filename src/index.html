<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

	<!-- Basic Page Needs
  ================================================== -->
	<meta charset="utf-8">
	<title>AJC Hospital Checkup</title>
	<meta name="description" content="">
	<meta name="author" content="Emily Merwin">

	<!-- Social Open Graph Metas: fill these out to make your fb sharing post
  ================================================== -->
  <meta property="og:url" content="" />
  <meta property="og:title" content="" />
  <meta property="og:type" content="" />
  <meta property="og:image" content="" />
  <meta property="og:description" content="" />

  <!-- Mobile Specific Metas
  ================================================== -->
   <meta name="apple-mobile-web-app-capable" content="yes">
   <meta name="apple-touch-fullscreen" content="yes">
   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
   <meta http-equiv="content-type" content="text/html; charset=utf-8">

	<!-- CSS
  ================================================== -->
	<link rel="stylesheet" href="assets/css/vendor/foundation.css">
  <link rel="stylesheet" href="assets/css/vendor/normalize.css">
  <link rel="stylesheet" href="assets/css/fonts.css">
  <link rel="stylesheet" href="assets/css/app.css">
	<script src="assets/js/vendor/modernizr.js"></script>

</head>
<body>
  <nav class="top-bar" data-topbar role="navigation">
    <ul class="title-area">
      <li class="name">
        <a href="http://myajc.com" target="_blank">
          <span id="ajc-logo"><img src="assets/img/ajc_white.svg"/></span>
        </a>
      </li>
      <li class="toggle-topbar menu-icon"><a href="#"><span></span></a></li>
    </ul>

    <section class="top-bar-section">
      <!-- Right Nav Section -->
      <ul class="right">
        <li class="active"><a class="button" href="/">Home</a></li>
        <li><a class="button" href="#infections">Infections</a></li>
        <li><a class="button" href="#hipsknees">Surgery</a></li>
        <li><a class="button" href="#perinatal">Labor and delivery</a></li>
      </ul>
    </section>
  </nav>

  <div id="app-container">
    <div id="main-region" class="container">
      <p>Static content, to be replaced by our app once it starts!</p>
    </div>
  </div>
  
  <script type="text/template" id="welcome-template">
    <div class="row">
      <h1>AJC Hospital Checkup</h1>
    </div>
    <div class="row">
      <p>For consumers who want to make smart health care choices, the AJC is dedicated to being the go-to source for information. This website allows you to compare the records of Metro Atlanta’s hospitals when it comes to patient safety, surgeries and maternity services. Not only do these reports help inform consumers, they also hold hospitals accountable for the quality of services they deliver. Plan to visit this site frequently, as the AJC’s experts will be adding more information in the coming months. We’re looking for your input too. If you’ve had an experience at a local hospital that you’d like to share with us, please <a href="mailto:cteegardin@ajc.com" target="_blank">send us an email.</a> We’d love to hear what you’re experiencing when you entrust your health to the hospitals in our community.</p>
    </div>
    
  </script>
  <script type="text/template" id="static-template">
    <p>This is text that was rendered by our Marionette app</p>
  </script>
  <script type="text/template" id="infection-template">
    <!-- this is just POC, display will change later -->
    <p><%- display_name %>- cdiff: <%- infections.cdiff.ratio %></p>
  </script>

  <script src="assets/js/vendor/jquery.js"></script>
	<script src="assets/js/vendor/fastclick.js"></script>
  <script src="assets/js/vendor/underscore.js"></script>
  <script src="assets/js/vendor/backbone.js"></script>
  <script src="assets/js/vendor/marionette.js"></script>
  <script src="assets/js/vendor/d3.js"></script>
  <script src="assets/js/vendor/d3bb.js"></script>
  <script src="assets/js/vendor/foundation.js"></script>
	<script src="assets/js/vendor/flatpage_stubs.js"></script>

  <!-- build:js scripts/main.js -->
	<script src="assets/js/main.js"></script>
  <!--TODO add these to gruntfile -->
  <script src="assets/js/app.js"></script>
  <script src="assets/js/entities/infection.js"></script>
  <!-- /build -->

  <script type="text/javascript">
    $(document).foundation();

    HospitalCheckup.InfectionItemView = Marionette.ItemView.extend({
      template: "#infection-template",

      events: {
        "click p": "alertDisplayName"
      },

      alertDisplayName: function(){
        alert(this.model.escape("display_name"));
      }
    });

    HospitalCheckup.WelcomeView = Marionette.ItemView.extend({
      //el: "#main-region",
      template: "#static-template"
    });

    HospitalCheckup.InfectionsView = Marionette.CollectionView.extend({
      //tagName: "ul",
      childView: HospitalCheckup.InfectionItemView
    });

    HospitalCheckup.on("start", function(){
      var infections = HospitalCheckup.request("infection:entities");

      var infectionView = new HospitalCheckup.InfectionItemView({
        model: infection
      });

      var infectionsListView = new HospitalCheckup.InfectionsView({
        collection: infections
      });

      HospitalCheckup.regions.main.show(infectionsListView);
      /*var welcomeView = new HospitalCheckup.WelcomeView({
        template: "#infection-template"
      });
      HospitalCheckup.regions.main.show(welcomeView);*/
      //welcomeView.render();
    });

    HospitalCheckup.start();
  </script>
</body>
</html>
