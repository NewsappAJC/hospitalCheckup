<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

	<!-- Basic Page Needs
  ================================================== -->
	<meta charset="utf-8">
	<title>AJC Hospital Checkup</title>
	<meta name="description" content="">
	<meta name="author" content="Emily Merwin">

	<!-- Social Open Graph Metas: fill these out to make your fb sharing post
  ================================================== -->
  <meta property="og:url" content="" />
  <meta property="og:title" content="" />
  <meta property="og:type" content="" />
  <meta property="og:image" content="" />
  <meta property="og:description" content="" />

  <!-- Mobile Specific Metas
  ================================================== -->
   <meta name="apple-mobile-web-app-capable" content="yes">
   <meta name="apple-touch-fullscreen" content="yes">
   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
   <meta http-equiv="content-type" content="text/html; charset=utf-8">

	<!-- CSS
  ================================================== -->
	<link rel="stylesheet" href="assets/css/vendor/foundation.css">
  <link rel="stylesheet" href="assets/css/vendor/normalize.css">
  <link rel="stylesheet" href="assets/css/fonts.css">
  <link rel="stylesheet" href="assets/css/app.css">
	<script src="assets/js/vendor/modernizr.js"></script>

</head>
<body>
  <nav class="top-bar" data-topbar role="navigation">
    <ul class="title-area">
      <li class="name">
        <a href="http://myajc.com" target="_blank">
          <span id="ajc-logo"><img src="assets/img/ajc_white.svg"/></span>
        </a>
      </li>
      <li class="toggle-topbar menu-icon"><a href="#"><span></span></a></li>
    </ul>

    <section class="top-bar-section">
      <!-- Right Nav Section -->
      <ul class="right">
        <li class="active"><a class="button" href="/">Home</a></li>
        <li><a class="button" href="#infections">Infections</a></li>
        <li><a class="button" href="#hipsknees">Surgery</a></li>
        <li><a class="button" href="#perinatal">Labor and delivery</a></li>
      </ul>
    </section>
  </nav>

  <div id="app-container">
    <div id="main-region" class="container">
      <p>Static content, to be replaced by our app once it starts!</p>
    </div>
  </div>
  
  <script type="text/template" id="welcome-template">
    <div class="row">
      <h1>AJC Hospital Checkup</h1>
    </div>
    <div class="row">
      <p>For consumers who want to make smart health care choices, the AJC is dedicated to being the go-to source for information. This website allows you to compare the records of Metro Atlanta’s hospitals when it comes to patient safety, surgeries and maternity services. Not only do these reports help inform consumers, they also hold hospitals accountable for the quality of services they deliver. Plan to visit this site frequently, as the AJC’s experts will be adding more information in the coming months. We’re looking for your input too. If you’ve had an experience at a local hospital that you’d like to share with us, please <a href="mailto:cteegardin@ajc.com" target="_blank">send us an email.</a> We’d love to hear what you’re experiencing when you entrust your health to the hospitals in our community.</p>
    </div>
    
  </script>
  <script type="text/template" id="static-template">
    <p>This is text that was rendered by our Marionette app</p>
  </script>
  <script type="text/template" id="infection-template">
    <p><%- display_name %></p>
  </script>

  <script src="assets/js/vendor/jquery.js"></script>
	<script src="assets/js/vendor/fastclick.js"></script>
  <script src="assets/js/vendor/underscore.js"></script>
  <script src="assets/js/vendor/backbone.js"></script>
  <script src="assets/js/vendor/marionette.js"></script>
  <script src="assets/js/vendor/d3.js"></script>
  <script src="assets/js/vendor/d3bb.js"></script>
  <script src="assets/js/vendor/foundation.js"></script>
	<script src="assets/js/vendor/flatpage_stubs.js"></script>

  <!-- build:js scripts/main.js -->
	<script src="assets/js/main.js"></script>
  <!--add these to gruntfile -->
  <script src="assets/js/app.js"></script>
  <script src="assets/js/entities/infection.js"></script>
  <!-- /build -->

  <script type="text/javascript">
    $(document).foundation();

    var infections = new HospitalCheckup.Entities.InfectionCollection([
      {
        "address": {
          "city": "CUMMING", 
          "county": "FORSYTH", 
          "state": "GA", 
          "street": "1200 NORTHSIDE FORSYTH DRIVE", 
          "zip": "30041"
        }, 
        "display_name": "Northside Hospital Forsyth", 
        "infections": {
          "cauti": {
            "category": "No Different than U.S. National Benchmark", 
            "days": "3665", 
            "lower": "0.289", 
            "na": "0", 
            "note": "", 
            "observed": "4", 
            "predicted": "4.398", 
            "ratio": "0.91", 
            "upper": "2.194"
          }, 
          "cdiff": {
            "category": "No Different than U.S. National Benchmark", 
            "days": "39174", 
            "lower": "0.847", 
            "na": "0", 
            "note": "", 
            "observed": "35", 
            "predicted": "28.779", 
            "ratio": "1.216", 
            "upper": "1.691"
          }, 
          "clabsi": {
            "category": "Better than the U.S. National Benchmark", 
            "days": "3796", 
            "lower": "0", 
            "na": "0", 
            "note": "The lower limit of the confidence interval cannot be calculated if the number of observed infections equals zero", 
            "observed": "0", 
            "predicted": "5.685", 
            "ratio": "0", 
            "upper": "0.527"
          }, 
          "ssicolon": {
            "category": "No Different than U.S. National Benchmark", 
            "lower": "0.172", 
            "na": "0", 
            "note": "", 
            "observed": "4", 
            "predicted": "7.382", 
            "procedures": "235", 
            "ratio": "0.542", 
            "upper": "1.307"
          }, 
          "ssihyst": {
            "category": "No Different than U.S. National Benchmark", 
            "lower": "0.212", 
            "na": "0", 
            "note": "", 
            "observed": "2", 
            "predicted": "1.578", 
            "procedures": "173", 
            "ratio": "1.267", 
            "upper": "4.187"
          }
        }, 
        "provider_id": "110005", 
        "provider_name": "NORTHSIDE HOSPITAL FORSYTH"
      }, 
      {
        "address": {
          "city": "ATHENS", 
          "county": "CLARKE", 
          "state": "GA", 
          "street": "1230 BAXTER STREET", 
          "zip": "30606"
        }, 
        "display_name": "Saint Mary's Hospital", 
        "infections": {
          "cauti": {
            "category": "Better than the U.S. National Benchmark", 
            "days": "1962", 
            "lower": "0.009", 
            "na": "0", 
            "note": "", 
            "observed": "1", 
            "predicted": "5.331", 
            "ratio": "0.188", 
            "upper": "0.925"
          }, 
          "cdiff": {
            "category": "No Different than U.S. National Benchmark", 
            "days": "18023", 
            "lower": "0.722", 
            "na": "0", 
            "note": "", 
            "observed": "15", 
            "predicted": "11.624", 
            "ratio": "1.29", 
            "upper": "2.129"
          }, 
          "clabsi": {
            "category": "No Different than U.S. National Benchmark", 
            "days": "1239", 
            "lower": "0", 
            "na": "0", 
            "note": "The lower limit of the confidence interval cannot be calculated if the number of observed infections equals zero", 
            "observed": "0", 
            "predicted": "2.434", 
            "ratio": "0", 
            "upper": "1.231"
          }, 
          "ssicolon": {
            "category": "No Different than U.S. National Benchmark", 
            "lower": "0", 
            "na": "0", 
            "note": "The lower limit of the confidence interval cannot be calculated if the number of observed infections equals zero", 
            "observed": "0", 
            "predicted": "2.237", 
            "procedures": "74", 
            "ratio": "0", 
            "upper": "1.339"
          }, 
          "ssihyst": {
            "category": "Not Available", 
            "lower": "0", 
            "na": "1", 
            "note": "Results cannot be calculated for this reporting period", 
            "observed": "0", 
            "predicted": "0.756", 
            "procedures": "82", 
            "ratio": "0", 
            "upper": "0"
          }
        }, 
        "provider_id": "110006", 
        "provider_name": "ST MARY'S HOSPITAL"
      }, 
      {
        "address": {
          "city": "CANTON", 
          "county": "CHEROKEE", 
          "state": "GA", 
          "street": "201 HOSPITAL ROAD", 
          "zip": "30114"
        }, 
        "display_name": "Northside Hospital Cherokee", 
        "infections": {
          "cauti": {
            "category": "No Different than U.S. National Benchmark", 
            "days": "1947", 
            "lower": "0", 
            "na": "0", 
            "note": "The lower limit of the confidence interval cannot be calculated if the number of observed infections equals zero", 
            "observed": "0", 
            "predicted": "2.531", 
            "ratio": "0", 
            "upper": "1.184"
          }, 
          "cdiff": {
            "category": "No Different than U.S. National Benchmark", 
            "days": "15184", 
            "lower": "0.416", 
            "na": "0", 
            "note": "", 
            "observed": "9", 
            "predicted": "9.895", 
            "ratio": "0.91", 
            "upper": "1.727"
          }, 
          "clabsi": {
            "category": "No Different than U.S. National Benchmark", 
            "days": "1440", 
            "lower": "0", 
            "na": "0", 
            "note": "The lower limit of the confidence interval cannot be calculated if the number of observed infections equals zero", 
            "observed": "0", 
            "predicted": "2.161", 
            "ratio": "0", 
            "upper": "1.386"
          }, 
          "ssicolon": {
            "category": "No Different than U.S. National Benchmark", 
            "lower": "0.241", 
            "na": "0", 
            "note": "", 
            "observed": "2", 
            "predicted": "1.394", 
            "procedures": "43", 
            "ratio": "1.435", 
            "upper": "4.74"
          }, 
          "ssihyst": {
            "category": "No Different than U.S. National Benchmark", 
            "lower": "0", 
            "na": "0", 
            "note": "The lower limit of the confidence interval cannot be calculated if the number of observed infections equals zero", 
            "observed": "0", 
            "predicted": "1.378", 
            "procedures": "129", 
            "ratio": "0", 
            "upper": "2.174"
          }
        }, 
        "provider_id": "110008", 
        "provider_name": "NORTHSIDE HOSPITAL CHEROKEE"
      }
    ]);

    

    HospitalCheckup.InfectionView = Marionette.ItemView.extend({
      template: "#infection-template",

      events: {
        "click p": "alertDisplayName"
      },

      alertDisplayName: function(){
        alert(this.model.escape("display_name"));
      }
    });

    HospitalCheckup.WelcomeView = Marionette.ItemView.extend({
      //el: "#main-region",
      template: "#static-template"
    });


    HospitalCheckup.on("start", function(){
      var infection = new HospitalCheckup.Entities.Infection({
        display_name: "Northside Hospital Forsyth",
        provider_name: "NORTHSIDE HOSPITAL FORSYTH"
      });

      var infectionView = new HospitalCheckup.InfectionView({
        model: infection
      });

      HospitalCheckup.regions.main.show(infectionView);
      /*var welcomeView = new HospitalCheckup.WelcomeView({
        template: "#infection-template"
      });
      HospitalCheckup.regions.main.show(welcomeView);*/
      //welcomeView.render();
    });

    /*var MyItemView = Marionette.ItemView.extend({});

    Marionette.CollectionView.extend({
      childView: MyItemView
    });*/
    /*HospitalCheckup.InfectionsCollection = Backbone.Collection.extend({
      url: "/data/infections.json",
      initialize: function() {
        this.model = HospitalCheckup.Infection;
        this.comparator = function(d) {
          // return d.get("stat");
          var na = d.get("na");
          return na === "0" ? d.get("stat") : 100;
        };
      }
    });*/

    HospitalCheckup.start();
  </script>
</body>
</html>
